PROJECT(tensorlab)  

cmake_minimum_required(VERSION 2.6)  

# find tensorflow include path
execute_process(COMMAND python -c "import tensorflow as tf; print(tf.sysconfig.get_include())" OUTPUT_VARIABLE INCLUDE_TENSORFLOW)
message(STATUS "Tensorflow include path: " ${INCLUDE_TENSORFLOW})

# add tensorflow includes
set(INCLUDE_TENSORFLOW "${INCLUDE_TENSORFLOW} /Users/Jason/ML/tensorflow")
include_directories(${INCLUDE_TENSORFLOW})


# add srouce files
aux_source_directory(kernels SRC_KERNELS)
set(SRC "${SRC_KERNELS}")


# set cxx flags
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -fPIC -O2")  
if(APPLE)
	set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -undefined dynamic_lookup")
endif()


# build 
add_library(tensorlab MODULE ${SRC})